!function i(n,u,a){function o(t,e){if(!u[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=u[t]={exports:{}},n[t][0].call(r.exports,function(e){return o(n[t][1][e]||e)},r,r.exports,i,n,u,a)}return u[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){"use strict";var a;(a=jQuery)("#updateVirtueResults").submit(function(e){var t=a("#selectedVirtue").val(),r=tinymce.get("definitionContent").getContent(),i=resultsData.apiURL,n=resultsData.nonce,u=a("#virtue-image-id").val();a.ajax({beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",n)},url:i,type:"POST",data:{action:"wp_rest",nonce:n,virtue:t,definition:r,imageID:u},success:function(e){a("#updateSuccess").show(),a("#updateSuccess").html(e.data)},error:function(e){a("#updateError").show(),a("#updateError").text(e.responseJSON.data)}})}),a("#virtueSelect").on("change",function(e){a(".formSuccess, .formError").hide();var t=a(this).val(),r=(a("#currentSelectedVirtue").text(t),a("#selectedVirtue").val(t),a(".vs-button-style").val("Save ".concat(t," Result")),resultsData.getVirtueResults),i=resultsData.nonce;a.ajax({beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",i)},url:r,type:"GET",data:{action:"wp_rest",nonce:i,virtue:t},success:function(e){tinymce.get("definitionContent").setContent(e.data.definition),e.data.imgURL?(a(".virtue-image-upl").removeClass("vs-button-style"),a(".virtue-image-upl").html('<img id="currentVirtueImg" src="'.concat(e.data.imgURL,'" />')),a(".virtue-image-rmv").show()):a(".virtue-image-rmv").trigger("click")},error:function(e){a("#updateError").show(),a("#updateError").text(e.responseJSON.data)}})}),a(".virtue-image-upl").click(function(e){e.preventDefault();var t=a(this),r=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:!1}).on("select",function(){var e=r.state().get("selection").first().toJSON();t.html('<img id="currentVirtueImg" src="'+e.url+'">').next().show().next().val(e.id),a(".virtue-image-upl").removeClass("vs-button-style")}).open()}),a(".virtue-image-rmv").click(function(e){e.preventDefault();var e=a("#selectedVirtue").val(),t=a(this);t.next().val(""),t.hide().prev().html("Upload icon for "+e).addClass("vs-button-style")})},{}]},{},[1]);
